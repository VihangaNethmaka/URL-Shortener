# Turn on the Rewrite Engine
RewriteEngine On

# ----------------------------------------------------------------
# Ensure that requests for existing files and directories are ignored
# ----------------------------------------------------------------

# If the request is for an actual file, stop rewriting
RewriteCond %{REQUEST_FILENAME} !-f

# If the request is for an actual directory, stop rewriting
RewriteCond %{REQUEST_FILENAME} !-d

# ----------------------------------------------------------------
# The main redirection rule
# ----------------------------------------------------------------
# Take the URL segment (which is the short code) and internally rewrite it 
# to redirect.php, passing the segment as a GET parameter named 'code'.
# The [L] flag means this is the last rule to be processed.
RewriteRule ^(.*)$ redirect.php?code=$1 [L,QSA]
